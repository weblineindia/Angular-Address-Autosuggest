{"version":3,"file":"angular-weblineindia-address.js","sources":["../../../projects/address/src/lib/address.service.ts","../../../projects/address/src/lib/address.component.ts","../../../projects/address/src/lib/address.module.ts","../../../projects/address/src/public-api.ts","../../../projects/address/src/angular-weblineindia-address.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AddressService {\n\n  constructor() { }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons';\n\n@Component({\n  selector: 'lib-address',\n  templateUrl: './address.component.html',\n  styleUrls: ['./address.component.css']\n})\nexport class AddressComponent {\n\n  ADDRESS_COMPONENTS: any = {\n    subpremise: 'short_name',\n    street_number: 'short_name',\n    route: 'long_name',\n    locality: 'long_name',\n    administrative_area_level_1: 'short_name',\n    administrative_area_level_2: 'long_name',\n    country: 'long_name',\n    postal_code: 'short_name',\n    street_name: 'short_name'\n  };\n\n  faPlus: any = faPlus;\n  faMinus: any = faMinus;\n  notStreetNumber: Boolean;\n  streetNumber: String = '';\n  selectedAddressArray: any = [];\n\n  @Input() isShowStreetField: Boolean = true;\n  @Input() addressValue: any = {\n    // Array of Object of multiple address\n    type: Array,\n    default: [\n      {\n        address: '',\n        geolocation: { x: 0, y: 0 },\n        country: '',\n        locality: '',\n        postalcode: '',\n        state: '',\n        province: '',\n        fulladdress: '',\n        streetaddress: '',\n        isDuplicate: false\n      }\n    ]\n  };\n  @Input() addressOptions: any;\n  @Input() addressArray: any;\n  @Input() addressUniqueErrorMsg: String;\n  @Input() maxlength: Number = 50;\n  @Input() name: String = '';\n  @Input() id: String = '';\n  @Input() disabled: Boolean = false;\n  @Input() value: String = '';\n  @Input() isMultiple: Boolean = true;\n  @Input() placeholder: String = 'Email';\n  @Input() isShowPlus: Boolean = false;\n  @Input() tabindex: Number = 0;\n  @Input() index: Number = 0;\n  @Output() changeAddress: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onPlus: EventEmitter<any> = new EventEmitter<any>();\n  @Output() blur: EventEmitter<any> = new EventEmitter<any>();\n  @Output() focus: EventEmitter<any> = new EventEmitter<any>();\n\n  ngOnInit() {}\n\n  handleAddressChange(event, index, addressArray) {\n    const place = event;\n    if (place.address_components !== undefined) {\n      this.selectedAddressArray[index] = this.formatResult(place);\n      let dataObj = { data: this.formatResult(place), index: index };\n      this.changeAddress.emit(dataObj);\n    } else {\n      this.value = place.name;\n      const data = [];\n      var geolocation;\n      if (place.geometry !== undefined) {\n        geolocation = {\n          x:\n            place.geometry.location.lat() === undefined\n              ? ''\n              : place.geometry.location.lat(),\n          y:\n            place.geometry.location.lng() === undefined\n              ? ''\n              : place.geometry.location.lat()\n        };\n      } else {\n        geolocation = {\n          x: '',\n          y: ''\n        };\n      }\n      data.push({\n        address: this.value,\n        geolocation: geolocation,\n        countryCode: 'it',\n        fulladdress: this.value,\n        country: '',\n        locality: '',\n        streetaddress: '',\n        premise: '',\n        postalcode: '',\n        state: '',\n        province: '',\n        isDuplicate: false\n      });\n      this.selectedAddressArray.push(data);\n      let dataObj = { data: data, index: index };\n      this.changeAddress.emit(dataObj);\n    }\n    this.uniqueAddressValidate(addressArray, index, event);\n  }\n\n  uniqueAddressValidate(addressArray, index, event) {\n    addressArray.map((item, key) => {\n      if (key !== index) {\n        if (item.address[0].address === event.formatted_address) {\n          addressArray[index].address[0].isDuplicate = true;\n        }\n      }\n    });\n  }\n\n  onBlur(event, index) {\n    let data = { event: event, index: index };\n    this.blur.emit(data);\n  }\n  onFocus(event, index) {\n    let data = { event: event, index: index };\n    this.focus.emit(data);\n  }\n  onPlusClick() {\n    this.onPlus.emit();\n  }\n\n  formatResult(place) {\n    const returnData = [];\n    let countryName = '';\n    let locality = '';\n    let postalCode = '';\n    let province = '';\n    let streetName = '';\n    var streetNumber;\n    let state = '';\n    for (let i = 0; i < place.address_components.length; i++) {\n      const addressType = place.address_components[i].types[0];\n\n      const addressTypeValue =\n        place.address_components[i][this.ADDRESS_COMPONENTS[addressType]];\n      switch (addressType) {\n        case 'country':\n          countryName = addressTypeValue;\n          break;\n        case 'locality':\n          locality = addressTypeValue;\n          break;\n        case 'postal_code':\n          postalCode = addressTypeValue;\n          break;\n        case 'administrative_area_level_1':\n          state = addressTypeValue;\n          break;\n        case 'administrative_area_level_2':\n          province = addressTypeValue;\n          break;\n        case 'street_number':\n          streetNumber = addressTypeValue;\n          break;\n        case 'street_name':\n          streetName = addressTypeValue;\n          break;\n      }\n      const geolocation = {\n        x: place.geometry.location.lat(),\n        y: place.geometry.location.lng()\n      };\n      const commaSeparator = streetNumber ? ', ' : '';\n      const space = streetName ? ' ' : '';\n      let selectedAddress = '';\n      let address = place.formatted_address;\n      if (streetNumber > 0) {\n        selectedAddress = place.formatted_address;\n      } else {\n        if (streetNumber !== undefined) {\n          selectedAddress =\n            streetNumber + commaSeparator + place.formatted_address;\n        } else {\n          selectedAddress = place.formatted_address;\n        }\n      }\n      var returnObject = {\n        geolocation: geolocation,\n        fulladdress: selectedAddress,\n        address: selectedAddress,\n        country: countryName,\n        locality: locality,\n        streetaddress: streetNumber + space + streetName,\n        premise: countryName,\n        postalcode: postalCode,\n        state: state,\n        province: province,\n        countryCode: 'it',\n        isDuplicate: false\n      };\n    }\n    if (\n      returnObject.streetaddress === '' ||\n      returnObject.streetaddress === 'undefined'\n    ) {\n      this.notStreetNumber = true;\n    } else {\n      this.notStreetNumber = false;\n    }\n    returnData.push(returnObject);\n    return returnData;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { AddressComponent } from './address.component';\nimport { GooglePlaceModule } from \"ngx-google-places-autocomplete\";\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'; \nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [AddressComponent],\n  imports: [\n    GooglePlaceModule,\n    FontAwesomeModule,\n    FormsModule,                               \n    ReactiveFormsModule ,\n    CommonModule\n\n  ],\n  exports: [AddressComponent]\n})\nexport class AddressModule { }\n","/*\n * Public API Surface of address\n */\n\nexport * from './lib/address.service';\nexport * from './lib/address.component';\nexport * from './lib/address.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}