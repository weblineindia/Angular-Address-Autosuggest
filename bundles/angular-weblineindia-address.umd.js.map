{"version":3,"file":"angular-weblineindia-address.umd.js","sources":["../../../projects/address/src/lib/address.service.ts","../../../projects/address/src/lib/address.component.ts","../../../projects/address/src/lib/address.module.ts","../../../projects/address/src/public-api.ts","../../../projects/address/src/angular-weblineindia-address.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AddressService {\n\n  constructor() { }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons';\n\n@Component({\n  selector: 'lib-address',\n  templateUrl: './address.component.html',\n  styleUrls: ['./address.component.css']\n})\nexport class AddressComponent {\n\n  ADDRESS_COMPONENTS: any = {\n    subpremise: 'short_name',\n    street_number: 'short_name',\n    route: 'long_name',\n    locality: 'long_name',\n    administrative_area_level_1: 'short_name',\n    administrative_area_level_2: 'long_name',\n    country: 'long_name',\n    postal_code: 'short_name',\n    street_name: 'short_name'\n  };\n\n  faPlus: any = faPlus;\n  faMinus: any = faMinus;\n  notStreetNumber: Boolean;\n  streetNumber: String = '';\n  selectedAddressArray: any = [];\n\n  @Input() isShowStreetField: Boolean = true;\n  @Input() addressValue: any = {\n    // Array of Object of multiple address\n    type: Array,\n    default: [\n      {\n        address: '',\n        geolocation: { x: 0, y: 0 },\n        country: '',\n        locality: '',\n        postalcode: '',\n        state: '',\n        province: '',\n        fulladdress: '',\n        streetaddress: '',\n        isDuplicate: false\n      }\n    ]\n  };\n  @Input() addressOptions: any;\n  @Input() addressArray: any;\n  @Input() addressUniqueErrorMsg: String;\n  @Input() maxlength: Number = 50;\n  @Input() name: String = '';\n  @Input() id: String = '';\n  @Input() disabled: Boolean = false;\n  @Input() value: String = '';\n  @Input() isMultiple: Boolean = true;\n  @Input() placeholder: String = 'Email';\n  @Input() isShowPlus: Boolean = false;\n  @Input() tabindex: Number = 0;\n  @Input() index: Number = 0;\n  @Output() changeAddress: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onPlus: EventEmitter<any> = new EventEmitter<any>();\n  @Output() blur: EventEmitter<any> = new EventEmitter<any>();\n  @Output() focus: EventEmitter<any> = new EventEmitter<any>();\n\n  ngOnInit() {}\n\n  handleAddressChange(event, index, addressArray) {\n    const place = event;\n    if (place.address_components !== undefined) {\n      this.selectedAddressArray[index] = this.formatResult(place);\n      let dataObj = { data: this.formatResult(place), index: index };\n      this.changeAddress.emit(dataObj);\n    } else {\n      this.value = place.name;\n      const data = [];\n      var geolocation;\n      if (place.geometry !== undefined) {\n        geolocation = {\n          x:\n            place.geometry.location.lat() === undefined\n              ? ''\n              : place.geometry.location.lat(),\n          y:\n            place.geometry.location.lng() === undefined\n              ? ''\n              : place.geometry.location.lat()\n        };\n      } else {\n        geolocation = {\n          x: '',\n          y: ''\n        };\n      }\n      data.push({\n        address: this.value,\n        geolocation: geolocation,\n        countryCode: 'it',\n        fulladdress: this.value,\n        country: '',\n        locality: '',\n        streetaddress: '',\n        premise: '',\n        postalcode: '',\n        state: '',\n        province: '',\n        isDuplicate: false\n      });\n      this.selectedAddressArray.push(data);\n      let dataObj = { data: data, index: index };\n      this.changeAddress.emit(dataObj);\n    }\n    this.uniqueAddressValidate(addressArray, index, event);\n  }\n\n  uniqueAddressValidate(addressArray, index, event) {\n    addressArray.map((item, key) => {\n      if (key !== index) {\n        if (item.address[0].address === event.formatted_address) {\n          addressArray[index].address[0].isDuplicate = true;\n        }\n      }\n    });\n  }\n\n  onBlur(event, index) {\n    let data = { event: event, index: index };\n    this.blur.emit(data);\n  }\n  onFocus(event, index) {\n    let data = { event: event, index: index };\n    this.focus.emit(data);\n  }\n  onPlusClick() {\n    this.onPlus.emit();\n  }\n\n  formatResult(place) {\n    const returnData = [];\n    let countryName = '';\n    let locality = '';\n    let postalCode = '';\n    let province = '';\n    let streetName = '';\n    var streetNumber;\n    let state = '';\n    for (let i = 0; i < place.address_components.length; i++) {\n      const addressType = place.address_components[i].types[0];\n\n      const addressTypeValue =\n        place.address_components[i][this.ADDRESS_COMPONENTS[addressType]];\n      switch (addressType) {\n        case 'country':\n          countryName = addressTypeValue;\n          break;\n        case 'locality':\n          locality = addressTypeValue;\n          break;\n        case 'postal_code':\n          postalCode = addressTypeValue;\n          break;\n        case 'administrative_area_level_1':\n          state = addressTypeValue;\n          break;\n        case 'administrative_area_level_2':\n          province = addressTypeValue;\n          break;\n        case 'street_number':\n          streetNumber = addressTypeValue;\n          break;\n        case 'street_name':\n          streetName = addressTypeValue;\n          break;\n      }\n      const geolocation = {\n        x: place.geometry.location.lat(),\n        y: place.geometry.location.lng()\n      };\n      const commaSeparator = streetNumber ? ', ' : '';\n      const space = streetName ? ' ' : '';\n      let selectedAddress = '';\n      let address = place.formatted_address;\n      if (streetNumber > 0) {\n        selectedAddress = place.formatted_address;\n      } else {\n        if (streetNumber !== undefined) {\n          selectedAddress =\n            streetNumber + commaSeparator + place.formatted_address;\n        } else {\n          selectedAddress = place.formatted_address;\n        }\n      }\n      var returnObject = {\n        geolocation: geolocation,\n        fulladdress: selectedAddress,\n        address: selectedAddress,\n        country: countryName,\n        locality: locality,\n        streetaddress: streetNumber + space + streetName,\n        premise: countryName,\n        postalcode: postalCode,\n        state: state,\n        province: province,\n        countryCode: 'it',\n        isDuplicate: false\n      };\n    }\n    if (\n      returnObject.streetaddress === '' ||\n      returnObject.streetaddress === 'undefined'\n    ) {\n      this.notStreetNumber = true;\n    } else {\n      this.notStreetNumber = false;\n    }\n    returnData.push(returnObject);\n    return returnData;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { AddressComponent } from './address.component';\nimport { GooglePlaceModule } from \"ngx-google-places-autocomplete\";\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'; \nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [AddressComponent],\n  imports: [\n    GooglePlaceModule,\n    FontAwesomeModule,\n    FormsModule,                               \n    ReactiveFormsModule ,\n    CommonModule\n\n  ],\n  exports: [AddressComponent]\n})\nexport class AddressModule { }\n","/*\n * Public API Surface of address\n */\n\nexport * from './lib/address.service';\nexport * from './lib/address.component';\nexport * from './lib/address.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Injectable","faPlus","faMinus","EventEmitter","Component","Input","Output","NgModule","GooglePlaceModule","FontAwesomeModule","FormsModule","ReactiveFormsModule","CommonModule"],"mappings":"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"}