!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@fortawesome/free-solid-svg-icons"),require("ngx-google-places-autocomplete"),require("@fortawesome/angular-fontawesome"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-weblineindia-address",["exports","@angular/core","@fortawesome/free-solid-svg-icons","ngx-google-places-autocomplete","@fortawesome/angular-fontawesome","@angular/forms","@angular/common"],t):t((e=e||self)["angular-weblineindia-address"]={},e.ng.core,e.freeSolidSvgIcons,e.ngxGooglePlacesAutocomplete,e.angularFontawesome,e.ng.forms,e.ng.common)}(this,(function(e,t,s,n,a,o,r){"use strict";var d=function(){};d.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new d},token:d,providedIn:"root"}),d.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],d.ctorParameters=function(){return[]};var i=function(){function e(){this.ADDRESS_COMPONENTS={subpremise:"short_name",street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",administrative_area_level_2:"long_name",country:"long_name",postal_code:"short_name",street_name:"short_name"},this.faPlus=s.faPlus,this.faMinus=s.faMinus,this.streetNumber="",this.selectedAddressArray=[],this.isShowStreetField=!0,this.addressValue={type:Array,default:[{address:"",geolocation:{x:0,y:0},country:"",locality:"",postalcode:"",state:"",province:"",fulladdress:"",streetaddress:"",isDuplicate:!1}]},this.maxlength=50,this.name="",this.id="",this.disabled=!1,this.value="",this.isMultiple=!0,this.placeholder="Email",this.isShowPlus=!1,this.tabindex=0,this.index=0,this.changeAddress=new t.EventEmitter,this.onPlus=new t.EventEmitter,this.blur=new t.EventEmitter,this.focus=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.handleAddressChange=function(e,t,s){var n=e;if(void 0!==n.address_components){this.selectedAddressArray[t]=this.formatResult(n);var a={data:this.formatResult(n),index:t};this.changeAddress.emit(a)}else{this.value=n.name;var o,r=[];o=void 0!==n.geometry?{x:void 0===n.geometry.location.lat()?"":n.geometry.location.lat(),y:void 0===n.geometry.location.lng()?"":n.geometry.location.lat()}:{x:"",y:""},r.push({address:this.value,geolocation:o,countryCode:"it",fulladdress:this.value,country:"",locality:"",streetaddress:"",premise:"",postalcode:"",state:"",province:"",isDuplicate:!1}),this.selectedAddressArray.push(r);a={data:r,index:t};this.changeAddress.emit(a)}this.uniqueAddressValidate(s,t,e)},e.prototype.uniqueAddressValidate=function(e,t,s){e.map((function(n,a){a!==t&&n.address[0].address===s.formatted_address&&(e[t].address[0].isDuplicate=!0)}))},e.prototype.onBlur=function(e,t){var s={event:e,index:t};this.blur.emit(s)},e.prototype.onFocus=function(e,t){var s={event:e,index:t};this.focus.emit(s)},e.prototype.onPlusClick=function(){this.onPlus.emit()},e.prototype.formatResult=function(e){for(var t,s=[],n="",a="",o="",r="",d="",i="",l=0;l<e.address_components.length;l++){var u=e.address_components[l].types[0],c=e.address_components[l][this.ADDRESS_COMPONENTS[u]];switch(u){case"country":n=c;break;case"locality":a=c;break;case"postal_code":o=c;break;case"administrative_area_level_1":i=c;break;case"administrative_area_level_2":r=c;break;case"street_number":t=c;break;case"street_name":d=c}var p={x:e.geometry.location.lat(),y:e.geometry.location.lng()},m=t?", ":"",f=d?" ":"",g="",h=(e.formatted_address,{geolocation:p,fulladdress:g=t>0?e.formatted_address:void 0!==t?t+m+e.formatted_address:e.formatted_address,address:g,country:n,locality:a,streetaddress:t+f+d,premise:n,postalcode:o,state:i,province:r,countryCode:"it",isDuplicate:!1})}return""===h.streetaddress||"undefined"===h.streetaddress?this.notStreetNumber=!0:this.notStreetNumber=!1,s.push(h),s},e}();i.decorators=[{type:t.Component,args:[{selector:"lib-address",template:'\n<input\nngx-google-places-autocomplete\n[value]="\n  addressValue.fulladdress !== undefined ? addressValue.fulladdress : \'\'\n"\n[options]="addressOptions"\n#placesRef="ngx-places"\n(onAddressChange)="handleAddressChange($event, index, addressArray)"\nclass="form-control"\n[placeholder]="placeholder"\n[maxLength]="maxlength"\n[name]="name"\n[id]="id"\n(blur)="onBlur($event, index)"\n(focus)="onFocus($event, index)"\n[disabled]="disabled"\n[tabindex]=tabindex\n/>\n<span *ngIf="isMultiple && addressValue !== \'\'" class="add-remove">\n<span>\n  <fa-icon [icon]="faMinus"></fa-icon>\n</span>\n<span *ngIf="isShowPlus" class="plus-icon">\n  <fa-icon [icon]="faPlus" (click)="onPlusClick()"></fa-icon>\n</span>\n</span>\n\n<p\n[ngClass]="{\n  control: true,\n  \'error-msg\':\n    addressValue[0].isDuplicate !== undefined\n      ? addressValue[0].isDuplicate\n      : false\n}"\n*ngIf="addressValue !== \'\' ? addressValue[0].isDuplicate : false"\n>\n<span>{{addressUniqueErrorMsg}}</span>\n</p>\n',styles:[".form-control{border:1px solid #ccc;box-sizing:border-box;display:inline-block;margin:8px 0;padding:12px 20px;width:50%}p.control.error-msg{color:red}.plus-icon{margin-left:5px}"]}]}],i.propDecorators={isShowStreetField:[{type:t.Input}],addressValue:[{type:t.Input}],addressOptions:[{type:t.Input}],addressArray:[{type:t.Input}],addressUniqueErrorMsg:[{type:t.Input}],maxlength:[{type:t.Input}],name:[{type:t.Input}],id:[{type:t.Input}],disabled:[{type:t.Input}],value:[{type:t.Input}],isMultiple:[{type:t.Input}],placeholder:[{type:t.Input}],isShowPlus:[{type:t.Input}],tabindex:[{type:t.Input}],index:[{type:t.Input}],changeAddress:[{type:t.Output}],onPlus:[{type:t.Output}],blur:[{type:t.Output}],focus:[{type:t.Output}]};var l=function(){};l.decorators=[{type:t.NgModule,args:[{declarations:[i],imports:[n.GooglePlaceModule,a.FontAwesomeModule,o.FormsModule,o.ReactiveFormsModule,r.CommonModule],exports:[i]}]}],e.AddressComponent=i,e.AddressModule=l,e.AddressService=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-weblineindia-address.umd.min.js.map